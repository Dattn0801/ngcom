<div class="product-page">
    <div class="grid">
        <div class="col-3" *ngIf="!isCategoryPage">
            <h4>Danh mục</h4>
            <div class="field-checkbox" *ngFor="let category of categories">
                <p-checkbox
                    [(ngModel)]="category.checked"
                    [binary]="true"
                    [inputId]="category.id!"
                    (onChange)="categoryFilter()"
                ></p-checkbox>
                <label for="{{ category.id }}">{{ category.name }}</label>
            </div>
        </div>

        <div [ngClass]="{ 'col-9': !isCategoryPage, 'col-12': isCategoryPage }">
            <!-- <div class="grid" *ngIf="products">
                    <div
                        [ngClass]="{ 'col-4': !isCategoryPage, 'col-3': isCategoryPage }"
                        *ngFor="let product of products"
                    >
                        <products-product-item [product]="product"></products-product-item>
                    </div>
                </div> -->
            <p-dataView
                #dv
                [value]="products"
                [paginator]="true"
                [rows]="9"
                layout="grid"
                [sortField]="sortField"
                [sortOrder]="sortOrder"
                filterBy="name"
            >
                <ng-template pTemplate="header">
                    <div class="flex flex-column md:flex-row md:justify-content-between">
                        <p-dropdown
                            [options]="sortOptions"
                            [(ngModel)]="sortKey"
                            placeholder="Sắp xếp theo giá"
                            (onChange)="onSortChange($event)"
                            styleClass="mb-2 md:mb-0"
                        ></p-dropdown>
                        <span class="p-input-icon-left mb-2 md:mb-0">
                            <i class="pi pi-search"></i>
                            <input
                                type="search"
                                pInputText
                                placeholder="Tìm kiếm theo tên"
                                (input)="dv.filter($event.target['value'])"
                            />
                        </span>
                    </div>
                </ng-template>

                <ng-template let-product pTemplate="gridItem">
                    <div [ngClass]="{ 'col-4': !isCategoryPage, 'col-3': isCategoryPage }">
                        <products-product-item [product]="product"></products-product-item>
                    </div>
                </ng-template>
            </p-dataView>
        </div>
    </div>
</div>
